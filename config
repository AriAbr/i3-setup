# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod4
set $alt Mod1
set $refreshi3bar killall i3bar; i3bar --bar_id=bar-1 &
# Focus color. Keep to 7 characters to line up with hex colors
set $fo_col #629bfc
for_window [instance="libreoffice"] border normal
for_window [instance="peek"] floating enable
for_window [class="Yad"] floating enable

# set_from_resource $bg           i3wm.color3
# set_from_resource $bg-alt       i3wm.color0

focus_follows_mouse no

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
#font pango:DejaVu Sans Mono 8

# The combination of xss-lock, nm-applet and pactl is a popular choice, so
# they are included here as an example. Modify as you see fit.

# xss-lock grabs a logind suspend inhibit lock and will use i3lock to lock the
# screen before suspend. Use loginctl lock-session to lock your screen.
exec --no-startup-id xss-lock --transfer-sleep-lock -- i3lock --nofork
bindsym $mod+Return exec gnome-terminal

# kill focused window
bindsym $mod+Shift+q kill

# start dmenu (a program launcher)
# bindsym $mod+d exec dmenu_run -l 15
bindsym $mod+Tab exec $(rofi -run-list-command ". ~/.config/i3/list_aliases.sh" -run-command "/bin/bash -i -c '{cmd}'" -show combi -show-icons -display-combi 'Open or Run')

# set screenlayout
exec_always --no-startup-id "autorandr --change"

# toggle screenlayout
bindsym $mod+m exec "autorandr --change"
bindsym $mod+Shift+m exec ~/.config/i3/toggle-display.sh

# set default screenlayout
# bug: on startup, right external monitor duplicates the laptop screen.
# exec --no-startup-id "~/.screenlayout/gabash_H_H.sh"
# exec --no-startup-id "autorandr --change"

# set background images
set $bg_left     ~/.config/i3/backgrounds/smoky3.jpg
set $bg_middle   ~/.config/i3/backgrounds/smoky1.jpg
set $bg_right    ~/.config/i3/backgrounds/smoky2.jpg
exec_always --no-startup-id feh --bg-fill $bg_right $bg_left $bg_middle

# There also is the (new) i3-dmenu-desktop which only displays applications
# shipping a .desktop file. It is a wrapper around dmenu, so you need that
# installed.
# bindsym $mod+d exec --no-startup-id i3-dmenu-desktop

# change focus
# bindsym $mod+j focus left
# bindsym $mod+k focus down
# bindsym $mod+l focus up
# bindsym $mod+semicolon focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
# bindsym $mod+Shift+j move left
# bindsym $mod+Shift+k move down
# bindsym $mod+Shift+l move up
# bindsym $mod+Shift+semicolon move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split in horizontal orientation
bindsym $mod+h split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+f floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
#bindsym $mod+d focus child

# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
set $wsp1 "1"
set $wsp2 "2"
set $wsp3 "3"
set $wsp4 "4"
set $wsp5 "5"
set $wsp6 "6"
set $wsp7 "7"
set $wsp8 "8"
set $wsp9 "9"
set $wsp0 "0"

# Teams, ferdi startup
# Before browser to override browser workspace assignment
set $wspTeams "ðŸ’¬ T"
# exec_always teams
assign [class="Teams"] $wspTeams
assign [class="teams-for-linux"] $wspTeams
assign [title="teams.microsoft.com"] $wspTeams
assign [title="Ferdi"] $wspTeams
workspace $wspTeams output eDP-1

# Browser startup
set $wspBrowser "ðŸŒŽ I"
assign [class="Brave-browser"] $wspBrowser
assign [class="Google-chrome"] $wspBrowser
workspace $wspBrowser output eDP-1

# Spotify startup
set $wspSpotify "ðŸŽ§ S"
for_window [class="Spotify"] move to workspace $wspSpotify # assign doesn't work for Spotify. Not sure why...
workspace $wspSpotify output eDP-1

# TIDE punch
exec --no-startup-id /home/ari/.config/i3/tide_punch

# switch to workspace
bindsym $mod+1 workspace $wsp1
bindsym $mod+2 workspace $wsp2
bindsym $mod+3 workspace $wsp3
bindsym $mod+4 workspace $wsp4
bindsym $mod+5 workspace $wsp5
bindsym $mod+6 workspace $wsp6
bindsym $mod+7 workspace $wsp7
bindsym $mod+8 workspace $wsp8
bindsym $mod+9 workspace $wsp9
bindsym $mod+0 workspace $wsp0
bindsym $mod+Control+i workspace $wspBrowser
bindsym $mod+Control+t workspace $wspTeams
bindsym $mod+Control+s workspace $wspSpotify


# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $wsp1
bindsym $mod+Shift+2 move container to workspace $wsp2
bindsym $mod+Shift+3 move container to workspace $wsp3
bindsym $mod+Shift+4 move container to workspace $wsp4
bindsym $mod+Shift+5 move container to workspace $wsp5
bindsym $mod+Shift+6 move container to workspace $wsp6
bindsym $mod+Shift+7 move container to workspace $wsp7
bindsym $mod+Shift+8 move container to workspace $wsp8
bindsym $mod+Shift+9 move container to workspace $wsp9
bindsym $mod+Shift+0 move container to workspace $wsp0
bindsym $mod+Shift+Control+i move container to workspace $wspBrowser
bindsym $mod+Shift+Control+t move container to workspace $wspTeams
bindsym $mod+Shift+Control+s move container to workspace $wspSpotify

# 
bindsym $mod+Shift+Ctrl+Left move workspace to output left
bindsym $mod+Shift+Ctrl+Right move workspace to output right

# Make the currently focused window a scratchpad
bindsym $mod+Shift+minus move scratchpad

# Show the first scratchpad window
bindsym $mod+Shift+plus scratchpad show


# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. r really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# resize window (you can also use the mouse for that)
mode "resize" {
# These bindings trigger as soon as you enter the resize mode

# Pressing left will shrink the windowâ€™s width.
# Pressing right will grow the windowâ€™s width.
# Pressing up will shrink the windowâ€™s height.
# Pressing down will grow the windowâ€™s height.
    bindsym h resize shrink width 10 px or 10 ppt
    bindsym j resize grow height 10 px or 10 ppt
    bindsym k resize shrink height 10 px or 10 ppt
    bindsym l resize grow width 10 px or 10 ppt

# same bindings, but for the arrow keys
    bindsym Left resize shrink width 10 px or 10 ppt
    bindsym Down resize grow height 10 px or 10 ppt
    bindsym Up resize shrink height 10 px or 10 ppt
    bindsym Right resize grow width 10 px or 10 ppt

# back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

bindsym $mod+r mode "resize"

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
    status_command i3blocks
    id bar-1
# height 25
        workspace_buttons yes
        position bottom
        # font pango:DejaVu Sans Mono 14
        font pango:Source Code Pro Medium 11, FontAwesome 11
        separator_symbol "|"
        strip_workspace_numbers yes
        colors {
            background #2e3440
                statusline #88c0d0
                separator $fo_col
#                  border  backgr. text
                focused_workspace  $fo_col $fo_col #252d3c
                active_workspace   #2e3440 #5f676a #ffffff
                inactive_workspace #2e3440 #2e3440 #88c0d0
                urgent_workspace   #5e81ac #bf616a #ffffff
        }
}

# # Multimedia Keys, don't need this with i3-gnome
# # increase volume
# bindsym XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +5%
# # decrease volume
# bindsym XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -5%
# # mute volume
# bindsym XF86AudioMute exec amixer -D pulse sset Master toggle

# toggle audio output
bindsym $mod+Shift+v exec ~/.config/i3/toggle-audio-output.sh


# pause / play / next / previous
# bindsym XF86AudioPlay exec "rhythmbox-client --play-pause"
# bindsym XF86AudioNext exec "rhythmbox-client --next"
# bindsym XF86AudioPrev exec "rhythmbox-client --prev"


# Screen brightness controls
# bindsym XF86MonBrightnessUp exec "light -A 10 && $refreshi3bar"
# bindsym XF86MonBrightnessDown exec "light -U 10 && $refreshi3bar"
# exec --no-startup-id brightshift 0.0

# COLORS
# class                 border  backgr. text    indicator child_border
client.focused          #000000 #2b78fd #ffffff $fo_col   $fo_col
client.focused_inactive #333333 #5f676a #ffffff #484e50

# screenshot (using flameshot)
bindsym --release Print exec "flameshot gui"

# peek
bindsym $mod+Print exec peek

# language toggle
bindsym Mod1+Tab exec ~/.config/i3/toggle-language.sh

# i3 Gnome settings
# GNOME Settings Daemon
exec --no-startup-id /usr/lib/gsd-xsettings

# system76-power
exec --no-startup-id system76-power profile battery
exec_always --no-startup-id ~/.config/i3/set-brightness.sh

# GNOME power manager
exec_always --no-startup-id gnome-power-manager
# polkit-gnome - Starts authentication-agent needed to get sudo password check aviable for GUIs needing it.
exec --no-startup-id /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
# GNOME Flashback - GNOME Flashback integrates more features from GNOME such as full functionality for gnome-control-center:
exec --no-startup-id gnome-flashback

# Remove borders, titles
for_window [class=".*"] border pixel 2

# picom
exec_always --no-startup-id picom --config ~/.config/i3/picom.conf &

# shutdown mode
set $shutdown_mode "Exit: [l]ogout, [r]eboot, [s]hutdown, slee[p], loc[k], [h]ibernate"
mode $shutdown_mode {
    bindsym l exec --no-startup-id i3-msg exit
    bindsym r exec --no-startup-id systemctl reboot, mode "default"
    bindsym s exec --no-startup-id systemctl shutdown, mode "default"
    bindsym p exec --no-startup-id systemctl suspend, mode "default"
    bindsym h exec --no-startup-id systemctl hibernate, mode "default"
    # bindsym k exec --no-startup-id xdg-screensaver lock, mode "default"
    bindsym k exec --no-startup-id i3lock, mode "default"
    bindsym Escape mode "default"
    bindsym Return mode "default"
}
bindsym $mod+x mode $shutdown_mode
